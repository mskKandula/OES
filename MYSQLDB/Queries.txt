show databases;

select database();

create database OES;

use OES;

CREATE TABLE Users(  
    id int NOT NULL AUTO_INCREMENT,  
    name varchar(45) NOT NULL,
    age int,
    email varchar(45) NOT NULL,
    mobileNo varchar(45) NOT NULL,
    password varchar(100) NOT NULL,
    PRIMARY KEY (id)  
); 

select * from Users;

CREATE TABLE Students (  
    id int NOT NULL AUTO_INCREMENT,  
    name varchar(45) NOT NULL,
    email varchar(45) NOT NULL UNIQUE,
    mobileNo varchar(45) NOT NULL UNIQUE,
    password varchar(100) NOT NULL,
    PRIMARY KEY (id)  
); 

select * from Students;

CREATE TABLE Menu (  
    id int NOT NULL AUTO_INCREMENT,  
    name varchar(45) NOT NULL,
    url varchar(45) NOT NULL,
    description varchar(45) NOT NULL,
    PRIMARY KEY (id)  
); 

INSERT INTO Menu(name,url,description) VALUES
('Dashboard','/dashboard','Dashboard'),
('MultipleStudentsRegistration','/multipleStudentsRegistration','MultipleStudentsRegistration'),
('StudentsList','/studentsList','StudentsList');

INSERT INTO Menu(name,url,description) VALUES
('Uploadquestions','/uploadQuestions','Uploadquestions'),
('Exam','onlineExam','Exam');

SET SQL_SAFE_UPDATES = 0;

update Menu set url='/onlineExam' where name = 'Exam';

select * from Menu;

show tables;

CREATE TABLE Role (  
    id int NOT NULL AUTO_INCREMENT,  
    name varchar(45) NOT NULL,
    PRIMARY KEY (id)  
);  

INSERT INTO Role(name) VALUES('Examiner'),('Student');

select * from Role;

CREATE TABLE UserRole (  
    userId int NOT NULL,  
    roleId int NOT NULL
);

CREATE TABLE RoleMenu (  
    roleId int NOT NULL,  
    menuId int NOT NULL
);

INSERT INTO roleMenu(roleId,menuId) VALUES(2,1),(2,5);

INSERT INTO roleMenu(roleId,menuId) VALUES(1,1),(1,2),(1,3),(1,4);

SELECT m.id,m.name,m.url,m.description FROM UserRole ur
	INNER JOIN RoleMenu rm ON ur.roleId = rm.roleId
	INNER JOIN menu m ON rm.menuId = m.id
	where ur.userId=?;

DROP TABLE VideoContent;

CREATE TABLE VideoContent(
   id INT NOT NULL AUTO_INCREMENT,  
    NAME VARCHAR(45) NOT NULL,
    videoUrl VARCHAR(100) NOT NULL,
    thumbnailPath VARCHAR(100) NOT NULL,
    contentType VARCHAR(50) NOT NULL,
    description VARCHAR(100),
    PRIMARY KEY (id));
    
SELECT * FROM VideoContent;